Sentry24 DVR - Analog
=====================

К сожалению, а может быть к счастью - данный раздел пишется по памяти так как у меня осталось только 2 сервера с аналоговыми платами, и доступ к ним ограничен. Там работают модифицированная система, установленная на USB Flash, сделал копию, пошел к дальше.

Во всех описанных экспериментах, используется версия 2.6.11. К давности продукта, оригинальный образ утерян (если он у Вас есть, буду благодарен если поделитесь, да любыми образами для DVR). У меня остался только `dvr-2.7-9-20121221.iso <http://sentry.tatarnikov.org/original/dvr-2.7-9-20121221.iso>`_, со временем проверю все наработки на нем.

Получение Root
--------------

Рассмотрим случай, когда у Вас уже есть установленная система.

Тогда при загрузке GRUB (сразу после BIOS) нажимаем ESC, и видим список вариантов загрузки, выбираем нужный Вам, нажимаем "e", переходим к параметрам ядра, к строке вида "kernel /boot/vmlinuz", опять нажимаем "e", и в самый конец строки дописываем "init=/bin/bash". Если у Вас получилось, что то вида :

.. code-block:: bash

    kernel /boot/vmlinuz root=/dev/sda1 ro quiet splash init=/bin/bash

Подтверждаем (enter) и нажимаем "b", после чего система начнет загружаться.

После запуска, у Вас будет рутовая консоль без запущенных сервисов.

.. note:: Тут есть косяк с консолью, могут не выводиться буквы, вводим команду "reset", и сбрасываем консоль к дефолтным настройкам.

Теперь надо перемонтировать файловую систему в режим для записи, для этого набираем:

.. code-block:: bash

    mount -o remount,rw /

Далее все элементарно, наберем passwd и вводим новый пароль для root, далее наберем "sync", а потом "[Ctrl] + [Alt] + [Delete]".

После запуска, подключаемся по SSH под пользователем admin (ssh admin@ip_addr_dvr), пароль от админа ваш, а если вы его не устанавливали то скорее всего это "admin" или "gollum04". Далее повышаем себе права, наберем "su", и вводим пароль рута, бинго.
